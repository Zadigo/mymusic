{"version":3,"file":"static/js/9068.7b2fafde.js","mappings":"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","sources":["webpack://frontend/./src/composables/utils/index.js","webpack://frontend/./src/layouts/BaseDetailPage.vue","webpack://frontend/./src/layouts/BaseDetailPage.vue?2fef"],"sourcesContent":["import _ from 'lodash'\r\nimport { computed, ref, watchEffect } from 'vue'\r\n\r\nfunction raiseError (functionName, message) {\r\n  throw new Error(`${functionName} - ${message}`)\r\n}\r\n\r\nexport function loadView (name) {\r\n  return () => import(`@/views/${name}.vue`)\r\n}\r\n\r\nexport function loadLayout (name) {\r\n  return () => import(`@/layouts/${name}.vue`)\r\n}\r\n\r\nexport function loadComponent (name) {\r\n  return () => import(`@/components/${name}.vue`)\r\n}\r\n\r\nexport function scrollToTop () {\r\n  window.scroll(0, 0)\r\n}\r\n\r\nexport function asyncTimeout (ms) {\r\n  return new Promise(resolve => setTimeout(resolve, ms))\r\n}\r\n\r\nexport function useUtilities () {\r\n  function hasNull (items) {\r\n    let itemsValues = []\r\n\r\n    if (typeof items === 'object') {\r\n      itemsValues = Object.values(items)\r\n    }\r\n\r\n    return _.some(itemsValues, (item) => {\r\n      return item === null || item === \"\"\r\n    })\r\n  }\r\n\r\n  function indexElements (items) {\r\n    items.forEach((item) => {\r\n      if (!(typeof item === 'object')) {\r\n        raiseError('indexElements', `${item} is not a dictionnary`)\r\n        return null\r\n      } else {\r\n        item.id = 1\r\n        return item\r\n      }\r\n    })\r\n  }\r\n  function incrementLastId (items) {\r\n    var lastItem = _.last(items)\r\n    if (!(typeof lastItem === 'object')) {\r\n      raiseError('incrementLastId', `${lastItem} is not a dictionnary`)\r\n      return null\r\n    } else {\r\n      return lastItem.id + 1\r\n    }\r\n  }\r\n\r\n  function readFile (file) {\r\n    var filePreview = null\r\n\r\n    if (file && file[0]) {\r\n      const reader = new FileReader\r\n\r\n      reader.onload = e => {\r\n        filePreview = e.target.result\r\n      }\r\n\r\n      reader.readAsDataURL(file[0])\r\n    }\r\n    return filePreview\r\n  }\r\n\r\n  function readMultipleFiles (files) {\r\n    return files.map((file) => {\r\n      return readFile(file)\r\n    })\r\n  }\r\n\r\n  function truncate (text, k = 28) {\r\n    if (!(typeof text === 'string')) {\r\n      raiseError('truncate', `${text} should be a string`)\r\n      return ''\r\n    } else {\r\n      return `${text.slice(0, k)}...`\r\n    }\r\n  }\r\n\r\n  function conditionalTruncate (text, limit, k) {\r\n    if (text.length >= limit) {\r\n      return truncate(text, k)\r\n    } else {\r\n      return text\r\n    }\r\n  }\r\n\r\n  function listManager (items, item) {\r\n    if (items.includes(item)) {\r\n      const index = _.indexOf(items, item)\r\n      items.splice(index, 1)\r\n    } else {\r\n      items.push(item)\r\n    }\r\n    return items\r\n  }\r\n\r\n  function increaseIndex (items, initialIndex) {\r\n    var newIndex = initialIndex + 1\r\n\r\n    if (newIndex > items.length - 1) {\r\n      newIndex = 0\r\n    }\r\n    return newIndex\r\n  }\r\n\r\n  function decreaseIndex (items, initialIndex) {\r\n    var newIndex = initialIndex - 1\r\n\r\n    if (newIndex < 0) {\r\n      newIndex = items.length - 1\r\n    }\r\n    return newIndex\r\n  }\r\n\r\n  function scrollToSection (elementId) {\r\n    document.getElementById(elementId).scrollIntoView()\r\n  }\r\n\r\n  function capitalizeFirstLetter (value) {\r\n    if (!value) {\r\n      return value\r\n    }\r\n    return value.charAt(0).toUpperCase() + value.slice(1)\r\n  }\r\n\r\n  function capitalizeLetters (value) {\r\n    var tokens = value.split(\" \")\r\n    var result = tokens.map((token) => {\r\n      return capitalizeFirstLetter(token)\r\n    })\r\n\r\n    return result.join(\" \")\r\n  }\r\n\r\n  function formatAsPercentage (value, negative = false) {\r\n    return negative ? `-${value}%` : `${value}%`\r\n  }\r\n\r\n  function getVerticalScrollPercentage (el) {\r\n    var parent = el.parentNode\r\n    return (el.scrollTop || parent.scrollTop) / (parent.scrollHeight - parent.clientHeight) * 100\r\n  }\r\n\r\n  function quickSort (items, ascending = true) {\r\n    return items.sort((a, b) => {\r\n      return ascending ? a - b : b - a\r\n    })\r\n  }\r\n\r\n  return {\r\n    capitalizeFirstLetter,\r\n    capitalizeLetters,\r\n    conditionalTruncate,\r\n    decreaseIndex,\r\n    formatAsPercentage,\r\n    getVerticalScrollPercentage,\r\n    hasNull,\r\n    indexElements,\r\n    incrementLastId,\r\n    increaseIndex,\r\n    listManager,\r\n    loadComponent,\r\n    loadLayout,\r\n    loadView,\r\n    quickSort,\r\n    readFile,\r\n    readMultipleFiles,\r\n    scrollToSection,\r\n    truncate\r\n  }\r\n}\r\n\r\nexport function useSocket () {\r\n  const socket = ref(null)\r\n\r\n  watchEffect(() => {\r\n    if (socket.value === null) {\r\n      return false\r\n    } else {\r\n      const result = socket.value === socket.value.OPEN\r\n      console.log(result)\r\n      return true\r\n    }\r\n  }, {\r\n    onTrigger(e) {\r\n      console.log('watchEffect', e)\r\n    }\r\n  })\r\n\r\n  function getWebsocketProtocole () {\r\n    var protocol = window.location.protocol\r\n    return protocol === 'https' ? 'wss://' : 'ws://'\r\n  }\r\n\r\n  function websocketRootAddress (path) {\r\n    var protocol = getWebsocketProtocole()\r\n    var host = process.env.HOST_ADDRESS || '127.0.0.1:8000'\r\n    return new URL(path, protocol + host).toString()\r\n  }\r\n\r\n  function createWebsocket (path, listeners = {}) {\r\n    // const socket = new WebSocket(websocketRootAddress(path))\r\n\r\n    // socket.onopen = listeners.onopen\r\n    // socket.onclose = listeners.onclose\r\n    // socket.onmessage = listeners.onmessage\r\n    // socket.onerror = listeners.onerror\r\n    \r\n    // return socket\r\n\r\n    const instance = new WebSocket(websocketRootAddress(path))\r\n    socket.value = instance\r\n    socket.value.onopen = listeners.onopen\r\n    socket.value.onclose = listeners.onclose\r\n    socket.value.onmessage = listeners.onmessage\r\n    socket.value.onerror = listeners.onerror\r\n  }\r\n\r\n  function send (type, items = {}) {\r\n    return JSON.stringify({ type: type, ...items })\r\n  }\r\n\r\n  return {\r\n    socket,\r\n    getWebsocketProtocole,\r\n    websocketRootAddress,\r\n    createWebsocket,\r\n    send\r\n  }\r\n}\r\n\r\nexport function useUrls () {\r\n  function rebuildPath (path) {\r\n    var instance = new URL(path, window.location.href)\r\n    return instance.toString()\r\n  }\r\n\r\n  function mediaUrl (path) {\r\n    var rootUrl = process.env.rootUrl || 'http://127.0.0.1:8000'\r\n    return new URL(path, rootUrl).toString()\r\n  }\r\n\r\n  function buildLimitOffset (url, limit = 100, offset = 0) {\r\n    let defaultLimit = 100\r\n    let defaultOffset = 0\r\n\r\n    if (url) {\r\n      const instance = new URL(url)\r\n      const potentialLimit = instance.searchParams.get('limit')\r\n      const potentialOffset = instance.searchParams.get('offset')\r\n\r\n      defaultLimit = potentialLimit || limit\r\n      defaultOffset = potentialOffset || offset\r\n    }\r\n\r\n    return new URLSearchParams({ limit: defaultLimit, offset: defaultOffset })\r\n  }\r\n\r\n  function getPageFromParams (url, page = 1) {\r\n    let defaultPage = 1\r\n\r\n    if (url) {\r\n      const instance = new URL(url)\r\n      const potentialPage = instance.searchParams.get('page')\r\n      defaultPage = potentialPage || page\r\n    }\r\n    return new URLSearchParams({ page: defaultPage })\r\n  }\r\n\r\n  return {\r\n    buildLimitOffset,\r\n    getPageFromParams,\r\n    mediaUrl,\r\n    rebuildPath\r\n  }\r\n}\r\n\r\nexport function useSearch (key, values, searchValue) {\r\n  const searchKey = key\r\n  const items = ref(values)\r\n  const search = ref(searchValue)\r\n\r\n  const searchedValues = computed(() =>  {\r\n    if (!search.value || search.value === \"\") {\r\n      return items\r\n    } else {\r\n      const searchLowerCase = search.value.toLowerCase()\r\n      return _.filter(items.value, (item) => {\r\n        const value = item[searchKey]\r\n        return value === searchKey || value.includes(searchKey) || value === searchLowerCase || value.includes(searchLowerCase)\r\n      })\r\n    }\r\n  })\r\n\r\n  return {\r\n    search,\r\n    searchedValues\r\n  }\r\n}\r\n","<template>\r\n  <section>\r\n    <div ref=\"link\" class=\"bg-dark px-4 py-5 bg-image\">\r\n      <div class=\"py-5\">\r\n        <slot></slot>\r\n\r\n        <!-- <div class=\"mask\"></div> -->\r\n        <div class=\"fader\"></div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"container\">\r\n      <slot name=\"content\"></slot>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport { useUrls } from '@/composables/utils'\r\n\r\nexport default {\r\n  name: 'BaseDetailPage',\r\n  props: {\r\n    image: {\r\n      type: String,\r\n      required: true\r\n    }\r\n  },\r\n  setup () {\r\n    const { mediaUrl } = useUrls()\r\n    return {\r\n      mediaUrl\r\n    }\r\n  },\r\n  mounted () {\r\n    const url = this.mediaUrl(this.image)\r\n    this.$refs.link.style.backgroundImage = `url(${url})`\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.bg-image {\r\n  background-position: center;\r\n  background-repeat: no-repeat;\r\n  background-size: cover;\r\n  height: 500px;\r\n}\r\n\r\n.mask {\r\n\r\n}\r\n\r\n.fader {\r\n  position: absolute;\r\n  left: 0;\r\n  bottom: 0;\r\n  background: linear-gradient(to top, rgba(38, 38, 38, 1), rgba(38, 38, 38, 0));\r\n  width: 100%;\r\n  height: 45%;\r\n}\r\n</style>\r\n","import { render } from \"./BaseDetailPage.vue?vue&type=template&id=dbb9f374&scoped=true\"\nimport script from \"./BaseDetailPage.vue?vue&type=script&lang=js\"\nexport * from \"./BaseDetailPage.vue?vue&type=script&lang=js\"\n\nimport \"./BaseDetailPage.vue?vue&type=style&index=0&id=dbb9f374&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\mywebsites\\\\mymusic\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-dbb9f374\"]])\n\nexport default __exports__"],"names":["raiseError","functionName","message","Error","loadView","name","loadLayout","loadComponent","asyncTimeout","ms","Promise","resolve","setTimeout","useUtilities","hasNull","items","itemsValues","Object","values","_","item","indexElements","forEach","id","incrementLastId","lastItem","readFile","file","filePreview","reader","FileReader","onload","e","target","result","readAsDataURL","readMultipleFiles","files","map","truncate","text","k","slice","conditionalTruncate","limit","length","listManager","includes","index","splice","push","increaseIndex","initialIndex","newIndex","decreaseIndex","scrollToSection","elementId","document","getElementById","scrollIntoView","capitalizeFirstLetter","value","charAt","toUpperCase","capitalizeLetters","tokens","split","token","join","formatAsPercentage","negative","getVerticalScrollPercentage","el","parent","parentNode","scrollTop","scrollHeight","clientHeight","quickSort","ascending","sort","a","b","useUrls","rebuildPath","path","instance","URL","window","location","href","toString","mediaUrl","rootUrl","process","buildLimitOffset","url","offset","defaultLimit","defaultOffset","potentialLimit","searchParams","get","potentialOffset","URLSearchParams","getPageFromParams","page","defaultPage","potentialPage","ref","class","_createElementVNode","_createElementBlock","_renderSlot","_ctx","undefined","_hoisted_3","props","image","type","String","required","setup","mounted","this","$refs","link","style","backgroundImage","__exports__","render"],"sourceRoot":""}