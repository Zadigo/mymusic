"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[401,361,13,413,722],{9255:function(t,s,e){e.d(s,{J_:function(){return a},sk:function(){return n}});e(1703),e(4806);function n(t){return new Promise((s=>setTimeout(s,t)))}function a(){function t(t){var s=new URL(t,window.location.href);return s.toString()}function s(t){var s={NODE_ENV:"production",BASE_URL:"/"}.rootUrl||"http://127.0.0.1:8000";return new URL(t,s).toString()}function e(t,s=100,e=0){let n=100,a=0;if(t){const i=new URL(t),r=i.searchParams.get("limit"),l=i.searchParams.get("offset");n=r||s,a=l||e}return new URLSearchParams({limit:n,offset:a})}function n(t,s=1){let e=1;if(t){const n=new URL(t),a=n.searchParams.get("page");e=a||s}return new URLSearchParams({page:e})}return{buildLimitOffset:e,getPageFromParams:n,mediaUrl:s,rebuildPath:t}}},7823:function(t,s,e){e.d(s,{n:function(){return a}});var n=e(3766);const a=(0,n.Q_)("player",{state:()=>({isPlaying:!1,currentSong:{}}),actions:{play(t){this.currentSong=t,this.isPlaying=!0},pause(){this.isPlaying=!1}},getters:{isCurrentSong(){return t=>t.name===this.currentSong.name}}})},6378:function(t,s,e){e.d(s,{K:function(){return l}});var n=e(3766),a=e(7823),i=e(4806),r=e.n(i);const l=(0,n.Q_)("playlists",{state:()=>({cursor:0,playlists:[],currentPlaylist:{songs:[]},playAllSongs:!1}),actions:{setPlaylist(t){const s=(0,i.toNumber)(t);this.currentPlaylist=r().find(this.playlists,["id",s])},increaseCursor(){},decreaseCursor(){},playAll(){this.cursor=0,this.playAllSongs=!0;const t=(0,a.n)();t.play(this.currentSong)},startPlaylist(){const t=(0,a.n)();t.play(this.currentSong)},stopPlaylist(){this.playAllSongs=!1;const t=(0,a.n)();t.pause()},nextSong(){const t=(0,a.n)();this.increaseCursor(),t.play(this.currentSong)},previousSong(){const t=(0,a.n)();this.decreaseCursor(),t.play(this.currentSong)},randomSong(){const t=(0,a.n)();this.cursor=0,t.play(this.currentSong)},loadFromCache(t=!1){(t||0===Object.keys(this.currentPlaylist).length)&&(this.playlists=this.$session.retrieve("playlists"))}},getters:{currentSong(){return this.currentPlaylist.songs[this.cursor]||{}},byGenre(){return[]},_isPlaying(){const t=(0,a.n)(),{isPlaying:s}=(0,n.Jk)(t);return s.value}}})},5361:function(t,s,e){e.r(s),e.d(s,{default:function(){return m}});var n=e(3396),a=e(7139);const i={class:"row"},r={class:"col-12"},l={class:"card bg-transparent shadow-none text-muted text-center"},o={class:"card-content"},c={class:"display-5"};function u(t,s,e,u,d,p){const y=(0,n.up)("font-awesome-icon");return(0,n.wg)(),(0,n.iD)("div",i,[(0,n._)("div",r,[(0,n._)("div",l,[(0,n._)("div",o,[(0,n.Wm)(y,{icon:"fa-solid fa-icons",class:"mb-4",size:"5x"}),(0,n._)("h4",c,(0,a.zw)(e.content),1)])])])])}var d={name:"EmptyIteration",props:{content:{type:String,default:"There are no playlists available"}}},p=e(89);const y=(0,p.Z)(d,[["render",u]]);var m=y},1013:function(t,s,e){e.r(s);const n={},a=n;s["default"]=a},6413:function(t,s,e){e.r(s);const n={},a=n;s["default"]=a},8722:function(t,s,e){e.r(s),e.d(s,{default:function(){return w}});var n=e(3396),a=e(7139);const i={class:"col-12 my-3"},r={key:0,class:"row"},l={class:"card my-2"},o=["src","alt"],c={class:"card-body"},u={class:"fw-bold card-title"},d={class:"card-text text-muted m-0"};function p(t,s,e,p,y,m){const h=(0,n.up)("router-link"),g=(0,n.up)("empty-iteration-vue");return(0,n.wg)(),(0,n.iD)("div",i,[p.store.playlists.length>0?((0,n.wg)(),(0,n.iD)("div",r,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(p.store.playlists,(s=>((0,n.wg)(),(0,n.iD)("article",{key:s.id,class:"col-sm-12 col-md-4"},[(0,n.Wm)(h,{to:m.navigateToPlaylist(s),"aria-label":s.name,class:"text-decoration-none text-white"},{default:(0,n.w5)((()=>[(0,n._)("div",l,[(0,n._)("img",{src:p.mediaUrl(s.cover_image),alt:s.name,class:"card-img-top"},null,8,o),(0,n._)("div",c,[(0,n._)("h4",u,(0,a.zw)(s.name),1),(0,n._)("p",d,(0,a.zw)(t.$t("Created by",{user:s.author.username})),1)])])])),_:2},1032,["to","aria-label"])])))),128))])):((0,n.wg)(),(0,n.j4)(g,{key:1,class:"py-5 my-5",content:"There are no playlists available"}))])}var y=e(9255),m=e(6378),h=e(5361),g={name:"ListPlaylists",components:{EmptyIterationVue:h["default"]},inject:{darkMode:["darkMode"]},setup(){const t=(0,m.K)(),{mediaUrl:s}=(0,y.J_)();return{store:t,mediaUrl:s}},created(){this.getPlaylists()},methods:{async getPlaylists(){try{if(this.sessionStorage.hasPlaylists)this.store.playlists=this.sessionStorage.playlists;else{const t=await this.$http.get("playlists");this.store.$patch((s=>{s.playlists=t.data,this.$session.create("hasPlaylists",!0),this.$session.create("playlists",t.data)}))}}catch(t){console.error(t)}},navigateToPlaylist(t){return this.store.setPlaylist(t.id),{name:"playlist_view",params:{id:t.id}}}}},f=e(89);const v=(0,f.Z)(g,[["render",p],["__scopeId","data-v-17a95e68"]]);var w=v},6401:function(t,s,e){e.r(s),e.d(s,{default:function(){return v}});var n=e(3396),a=e(7139);const i={id:"playlists",class:"p-5"},r={class:"row"},l={class:"col-12"},o=["onClick"],c={key:0,class:"col-12 mt-4"};function u(t,s,e,u,d,p){const y=(0,n.up)("font-awesome-icon");return(0,n.wg)(),(0,n.iD)("section",i,[(0,n._)("div",r,[(0,n._)("div",l,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.displayChoices,((s,e)=>((0,n.wg)(),(0,n.iD)("button",{key:e,class:(0,a.C_)([[s.component===t.activeComponent?"active":null,{"mx-2":e>0}],"btn btn-light"]),type:"button",onClick:e=>t.activeComponent=s.component},(0,a.zw)(t.$t(s.name)),11,o)))),128))]),"list-playlists-vue"===t.activeComponent?((0,n.wg)(),(0,n.iD)("div",c,[(0,n._)("button",{type:"button",class:"btn btn-primary",onClick:s[0]||(s[0]=(...t)=>p.create&&p.create(...t))},[(0,n.Wm)(y,{icon:"fa-solid fa-plus",class:"me-2"}),(0,n.Uk)(" "+(0,a.zw)(t.$t("Create playlist")),1)])])):(0,n.kq)("",!0),((0,n.wg)(),(0,n.j4)((0,n.LL)(t.activeComponent)))])])}var d=e(6378),p=e(6413),y=e(1013),m=e(8722),h={name:"PlaylistsView",components:{ListArtistsVue:p["default"],ListAlbumsVue:y["default"],ListPlaylistsVue:m["default"]},emits:{"display-alert":()=>!0},setup(){const t=(0,d.K)();return{store:t}},data:()=>({displayChoices:[{name:"Playlists",component:"list-playlists-vue"},{name:"Artists",component:"list-artists-vue"},{name:"Albums",component:"list-albums-vue"}],activeComponent:"list-playlists-vue"}),methods:{async create(){try{const t=await this.$http.post("playlists/create");this.$session.updateArray("playlists",t.data),this.store.loadFromCache(!0),this.$emit("display-alert","success","Playlist created",t)}catch(t){this.$emit("display-alert","error","PLA-CRE",t.message)}}}},g=e(89);const f=(0,g.Z)(h,[["render",u]]);var v=f}}]);
//# sourceMappingURL=401.974d6945.js.map