"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[14],{2014:function(t,e,i){i.r(e),i.d(e,{default:function(){return P}});var r=i(3396),s=i(9242),a=i(7139);const n={class:"card bg-transparent"},o={class:"card-body position-relative"},l=["src"],d={class:"audio-controls"},c={class:"progress-bar-container"},u={class:"row"},h={class:"col-12 mt-3 d-flex justify-content-between"},p={class:"card-footer text-center"},f={class:"btn-group shadow-sm"},g={type:"button",class:"btn btn-info shadow-sm mt-1"};function m(t,e,i,m,y,k){const b=(0,r.up)("font-awesome-icon");return(0,r.wg)(),(0,r.iD)("div",n,[(0,r._)("div",o,[(0,r._)("audio",{ref:"link",preload:"auto",onLoadedmetadata:e[0]||(e[0]=(...t)=>k.updateAudioDetails&&k.updateAudioDetails(...t)),onTimeupdate:e[1]||(e[1]=(...t)=>k.updateAudioDetails&&k.updateAudioDetails(...t)),onWaiting:e[2]||(e[2]=e=>t.showSpinner=!0),onCanplay:e[3]||(e[3]=e=>t.showSpinner=!1)},[(0,r._)("source",{src:k.checkSrc(i.src),type:"audio/mpeg"},null,8,l)],544),(0,r._)("div",d,[(0,r._)("div",c,[(0,r._)("div",{ref:"progress",class:"progress-bar",onClick:e[5]||(e[5]=(0,s.withModifiers)(((...t)=>k.handleProgressBarClick&&k.handleProgressBarClick(...t)),["prevent","stop"]))},[(0,r._)("div",{style:(0,a.j5)({width:k.progressPercentage+"%"}),class:"progress-bar-completed"},[(0,r._)("div",{style:(0,a.j5)({left:k.progressPercentage+"%"}),class:"progress-indicator",draggable:"",onMousedown:e[4]||(e[4]=(...t)=>k.handleDrag&&k.handleDrag(...t))},null,36)],4)],512)])]),(0,r._)("div",u,[(0,r._)("div",h,[(0,r._)("span",null,(0,a.zw)(k.formattedCurrentTime),1),(0,r._)("span",null,(0,a.zw)(k.formattedDuration),1)])])]),(0,r._)("div",p,[(0,r._)("div",f,[(0,r._)("button",{class:(0,a.C_)([[k.canPlay?null:"disabled"],"btn btn-primary"]),type:"button",onClick:e[6]||(e[6]=(...t)=>k.handleSkipPrevious&&k.handleSkipPrevious(...t))},[(0,r.Wm)(b,{icon:"fa-solid fa-backward-step"})],2),(0,r._)("button",{class:(0,a.C_)([[k.canPlay?null:"disabled"],"btn btn-primary"]),type:"button",onClick:e[7]||(e[7]=(...t)=>k.toggleAudioPlay&&k.toggleAudioPlay(...t))},[i.togglePlay?((0,r.wg)(),(0,r.j4)(b,{key:0,icon:"fa-solid fa-pause"})):((0,r.wg)(),(0,r.j4)(b,{key:1,icon:"fa-solid fa-play"}))],2),(0,r._)("button",{class:(0,a.C_)([[k.canPlay?null:"disabled"],"btn btn-primary"]),type:"button",onClick:e[8]||(e[8]=(...t)=>k.handleSkipNext&&k.handleSkipNext(...t))},[(0,r.Wm)(b,{icon:"fa-solid fa-forward-step"})],2)]),(0,r._)("button",g,[(0,r.Wm)(b,{icon:"fa-solid fa-volume-up"})])])])}var y={name:"BaseMusicPlayer",props:{src:{type:String,required:!0},togglePlay:{type:Boolean}},emits:{"player-error":()=>!0,"player-ready":()=>!0,playing:()=>!0,completed:()=>!0,paused:()=>!0,"skipped-backwards":()=>!0,skipped:()=>!0,"next-song":()=>!0},data:()=>({showSpinner:!0,duration:0,currentTime:0,isPlaying:!1}),computed:{formattedDuration(){return this.formatTime(this.duration)},formattedCurrentTime(){return this.formatTime(this.currentTime)},progressPercentage(){return 0===this.currentTime&&0===this.duration?0:this.currentTime/this.duration*100},canPlay(){return null!==this.checkSrc(this.src)}},watch:{src(t,e){t!==e&&(this.$refs.link.src=this.checkSrc(t),this.updateAudioDetails(),this.toggleAudioPlay())},togglePlay(){this.toggleAudioPlay()},currentTime(t){this.isPlaying&&t===this.duration&&this.$emit("completed")}},methods:{checkSrc(t){if(t){const e=new URL(t);return"/undefined"===e.pathname?null:e.toString()}return null},toggleAudioPlay(){try{this.$refs.link.paused?(this.isPlaying=!0,this.$refs.link.play(),this.$emit("playing")):(this.isPlaying=!1,this.$refs.link.pause(),this.$emit("paused",this.currentTime))}catch(t){this.$emit("player-error","Could not start track")}},updateAudioDetails(){this.duration=this.$refs.link.duration,this.currentTime=this.$refs.link.currentTime},handleSkipPrevious(){try{this.$emit("skipped-backwards",this.formattedCurrentTime),this.$refs.link.currentTime=0}catch(t){console.error(t)}},handleSkipNext(){this.$emit("next-song")},handleProgressBarClick(t){const e=this.currentTime,i=this.duration*t.offsetX/this.$refs.progress.offsetWidth;this.currentTime=i,this.$refs.link.currentTime=i,this.$emit("skipped",[e,this.currentTime])},handleDrag(t){if(0!==t.x&&0!==t.y){const e=this.$refs.progress;if(e){let i=0;const r=t.pageX-e.getBoundingClientRect().left;i=r,r<0&&(i=0),r>e.offsetWidth&&(i=e.offsetWidth),console.log(this.duration*(i/e.offsetWidth))}}},formatTime(t){let e=Math.floor(t/3600),i=Math.floor(t%3600/60),r=Math.floor(t%60);return e=e<10?"0"+e:e,i=i<10?"0"+i:i,r=r<10?"0"+r:r,e>0?":":`${i}:${r}`}}},k=i(89);const b=(0,k.Z)(y,[["render",m],["__scopeId","data-v-451797cb"]]);var P=b}}]);
//# sourceMappingURL=14.0a139df3.js.map