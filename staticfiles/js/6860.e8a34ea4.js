"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[6860,8807],{9255:function(t,e,n){n.d(e,{J_:function(){return d},jh:function(){return c},sk:function(){return u}});n(1703);var i=n(4806),r=n.n(i);function a(t,e){throw new Error(`${t} - ${e}`)}function o(t){return()=>n(2513)(`./${t}.vue`)}function s(t){return()=>n(2115)(`./${t}.vue`)}function l(t){return()=>n(3457)(`./${t}.vue`)}function u(t){return new Promise((e=>setTimeout(e,t)))}function c(){function t(t){let e=[];return"object"===typeof t&&(e=Object.values(t)),r().some(e,(t=>null===t||""===t))}function e(t){t.forEach((t=>"object"!==typeof t?(a("indexElements",`${t} is not a dictionnary`),null):(t.id=1,t)))}function n(t){var e=r().last(t);return"object"!==typeof e?(a("incrementLastId",`${e} is not a dictionnary`),null):e.id+1}function i(t){var e=null;if(t&&t[0]){const n=new FileReader;n.onload=t=>{e=t.target.result},n.readAsDataURL(t[0])}return e}function u(t){return t.map((t=>i(t)))}function c(t,e=28){return"string"!==typeof t?(a("truncate",`${t} should be a string`),""):`${t.slice(0,e)}...`}function d(t,e,n){return t.length>=e?c(t,n):t}function f(t,e){if(t.includes(e)){const n=r().indexOf(t,e);t.splice(n,1)}else t.push(e);return t}function m(t,e){var n=e+1;return n>t.length-1&&(n=0),n}function p(t,e){var n=e-1;return n<0&&(n=t.length-1),n}function h(t){document.getElementById(t).scrollIntoView()}function g(t){return t?t.charAt(0).toUpperCase()+t.slice(1):t}function y(t){var e=t.split(" "),n=e.map((t=>g(t)));return n.join(" ")}function w(t,e=!1){return e?`-${t}%`:`${t}%`}function v(t){var e=t.parentNode;return(t.scrollTop||e.scrollTop)/(e.scrollHeight-e.clientHeight)*100}function k(t,e=!0){return t.sort(((t,n)=>e?t-n:n-t))}return{capitalizeFirstLetter:g,capitalizeLetters:y,conditionalTruncate:d,decreaseIndex:p,formatAsPercentage:w,getVerticalScrollPercentage:v,hasNull:t,indexElements:e,incrementLastId:n,increaseIndex:m,listManager:f,loadComponent:l,loadLayout:s,loadView:o,quickSort:k,readFile:i,readMultipleFiles:u,scrollToSection:h,truncate:c}}function d(){function t(t){var e=new URL(t,window.location.href);return e.toString()}function e(t){var e={NODE_ENV:"production",BASE_URL:"/"}.rootUrl||"http://127.0.0.1:8000";return new URL(t,e).toString()}function n(t,e=100,n=0){let i=100,r=0;if(t){const a=new URL(t),o=a.searchParams.get("limit"),s=a.searchParams.get("offset");i=o||e,r=s||n}return new URLSearchParams({limit:i,offset:r})}function i(t,e=1){let n=1;if(t){const i=new URL(t),r=i.searchParams.get("page");n=r||e}return new URLSearchParams({page:n})}return{buildLimitOffset:n,getPageFromParams:i,mediaUrl:e,rebuildPath:t}}},7823:function(t,e,n){n.d(e,{n:function(){return r}});var i=n(3766);const r=(0,i.Q_)("player",{state:()=>({isPlaying:!1,currentSong:{}}),actions:{play(t){this.currentSong=t,this.isPlaying=!0},pause(){this.isPlaying=!1}},getters:{isCurrentSong(){return t=>t.name===this.currentSong.name}}})},6860:function(t,e,n){n.r(e),n.d(e,{default:function(){return v}});var i=n(3396),r=n(9242),a=n(7139);const o={class:"main-interface"},s={class:"left"},l={key:0,id:"app-navigation"},u={key:1,id:"app-navigation"},c={id:"profile-navigation"},d={class:"center"};function f(t,e,n,f,m,p){const h=(0,i.up)("font-awesome-icon"),g=(0,i.up)("router-link"),y=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)("section",o,[(0,i._)("div",s,[(0,i.Wm)(r.Transition,{name:"general"},{default:(0,i.w5)((()=>["profile"===t.$route.name?((0,i.wg)(),(0,i.iD)("div",l,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.profileNavButtons,((t,e)=>((0,i.wg)(),(0,i.j4)(g,{key:e,to:{name:t.name},class:"nav-button"},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{class:"me-3",icon:`fa-solid fa-${t.icon}`},null,8,["icon"]),(0,i._)("span",null,(0,a.zw)(t.name),1)])),_:2},1032,["to"])))),128))])):((0,i.wg)(),(0,i.iD)("div",u,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.navButtons,((e,n)=>((0,i.wg)(),(0,i.j4)(g,{key:n,to:{name:e.to},class:"nav-button ripple-effect"},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{class:"me-3",icon:e.icon},null,8,["icon"]),(0,i._)("span",null,(0,a.zw)(t.$t(e.name)),1)])),_:2},1032,["to"])))),128))]))])),_:1}),(0,i._)("div",c,["profile"==t.$route.name?((0,i.wg)(),(0,i.j4)(g,{key:0,id:"nav-button",class:"profile-button",to:{name:"home_view"}},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{class:"me-3",icon:"arrow-left"}),(0,i.Uk)(" "+(0,a.zw)(t.$t("Back to home")),1)])),_:1})):((0,i.wg)(),(0,i.j4)(g,{key:1,id:"nav-button",class:"nav-button profile",to:{name:"profile_view"}},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{class:"me-3",icon:"fa-solid fa-cog"}),(0,i.Uk)(" "+(0,a.zw)(t.$t("Profile")),1)])),_:1}))])]),(0,i._)("div",d,[(0,i.Wm)(y,null,{default:(0,i.w5)((({Component:t})=>[(0,i.Wm)(r.Transition,{name:"opacity",mode:"in-out"},{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.j4)((0,i.LL)(t),{onDisplayAlert:p.displayAlert},null,40,["onDisplayAlert"]))])),_:2},1024)])),_:1})])])}var m=n(9255),p=n(7823),h=n(8807),g={name:"BaseInterface",components:{BaseMusicPlayerVue:h["default"]},setup(){const{mediaUrl:t}=(0,m.J_)(),e=(0,p.n)();return{mediaUrl:t,player:e}},data:()=>({minimizeRight:!1,navButtons:[{name:"Home",to:"home_view",icon:"home"},{name:"Search",to:"search_view",icon:"magnifying-glass"},{name:"Playlists",to:"playlists_view",icon:"list"}]}),beforeMount(){this.localStorage.settings},methods:{minimize(){this.minimizeRight=!this.minimizeRight;let t=this.$localstorage.retrieve("settings");t=t||{},t.minimized=this.minimizeRight},displayAlert(t,e,n){this.$refs.alert.showAlert(t,n,e)}}},y=n(89);const w=(0,y.Z)(g,[["render",f],["__scopeId","data-v-3dd75279"]]);var v=w},8807:function(t,e,n){n.r(e),n.d(e,{default:function(){return _}});var i=n(3396),r=n(7139),a=n(9242);const o=t=>((0,i.dD)("data-v-526b0f2e"),t=t(),(0,i.Cn)(),t),s={class:"container"},l={class:"py-1"},u={class:"p-1 mb-3 text-center"},c={type:"button",class:"btn btn-info shadow-sm"},d=["src"],f={class:"audio-controls"},m={class:"music-control-progress-container"},p=o((()=>(0,i._)("div",{class:"track-selection"},null,-1))),h={class:"row"},g={class:"col-12 mt-1 d-flex justify-content-between"};function y(t,e,n,o,y,w){const v=(0,i.up)("font-awesome-icon");return(0,i.wg)(),(0,i.iD)("div",s,[(0,i._)("div",l,[(0,i._)("div",u,[(0,i._)("button",{class:(0,r.C_)([[w.canPlay?null:"disabled"],"btn btn-primary"]),type:"button",onClick:e[0]||(e[0]=(...t)=>w.handleSkipPrevious&&w.handleSkipPrevious(...t))},[(0,i.Wm)(v,{icon:"fa-solid fa-backward-step"})],2),(0,i._)("button",{class:(0,r.C_)([[w.canPlay?null:"disabled"],"btn btn-primary mx-1"]),type:"button",onClick:e[1]||(e[1]=(...t)=>w.toggleAudioPlay&&w.toggleAudioPlay(...t))},[n.togglePlay?((0,i.wg)(),(0,i.j4)(v,{key:0,icon:"fa-solid fa-pause"})):((0,i.wg)(),(0,i.j4)(v,{key:1,icon:"fa-solid fa-play"}))],2),(0,i._)("button",{class:(0,r.C_)([[w.canPlay?null:"disabled"],"btn btn-primary"]),type:"button",onClick:e[2]||(e[2]=(...t)=>w.handleSkipNext&&w.handleSkipNext(...t))},[(0,i.Wm)(v,{icon:"fa-solid fa-forward-step"})],2),(0,i._)("button",{class:(0,r.C_)([[w.canPlay?null:"disabled"],"btn btn-primary mx-1"]),type:"button",onClick:e[3]||(e[3]=(0,a.withModifiers)((()=>{}),["prevent"]))},[(0,i.Wm)(v,{icon:"fa-solid fa-repeat"})],2),(0,i._)("button",c,[(0,i.Wm)(v,{icon:"fa-solid fa-volume-up"})])]),(0,i._)("div",null,[(0,i._)("audio",{ref:"link",preload:"auto",onLoadedmetadata:e[4]||(e[4]=(...t)=>w.updateAudioDetails&&w.updateAudioDetails(...t)),onTimeupdate:e[5]||(e[5]=(...t)=>w.updateAudioDetails&&w.updateAudioDetails(...t)),onWaiting:e[6]||(e[6]=t=>y.showSpinner=!0),onCanplay:e[7]||(e[7]=t=>y.showSpinner=!1)},[(0,i._)("source",{src:w.checkSrc(n.src),type:"audio/mpeg"},null,8,d)],544),(0,i._)("div",f,[(0,i._)("div",m,[(0,i._)("div",{ref:"videoProgress",class:"track",onClick:e[8]||(e[8]=(0,a.withModifiers)((t=>w.handleProgressBarClick(t)),["stop","prevent"]))},[(0,i._)("div",{style:(0,r.j5)({width:`${w.progressPercentage}%`}),class:"track-low"},null,4),p],512),(0,i._)("div",{style:(0,r.j5)({left:`${t.progress}%`}),class:"handle"},null,4)])]),(0,i._)("div",h,[(0,i._)("div",g,[(0,i._)("span",null,(0,r.zw)(w.formattedCurrentTime),1),(0,i._)("span",null,(0,r.zw)(w.formattedDuration),1)])])])])])}var w={name:"BaseMusicPlayer",props:{src:{type:String,required:!0},togglePlay:{type:Boolean}},emits:{"player-error"(){return!0},"player-ready"(){return!0},playing(){return!0},completed(){return!0},paused(){return!0},"skipped-backwards"(){return!0},"update:time"(){return!0},"next-song"(){return!0},"count:view"(){return!0}},data(){return{showSpinner:!0,duration:0,currentTime:0,isPlaying:!1,countView:!1}},computed:{formattedDuration(){return this.formatTime(this.duration)},formattedCurrentTime(){return this.formatTime(this.currentTime)},progressPercentage(){return 0===this.currentTime&&0===this.duration?0:this.currentTime/this.duration*100},canPlay(){return null!==this.checkSrc(this.src)}},watch:{src(t,e){t!==e&&(this.$refs.link.src=this.checkSrc(t),this.updateAudioDetails(),this.toggleAudioPlay())},togglePlay(){this.toggleAudioPlay()},currentTime(t){this.isPlaying&&t===this.duration&&this.$emit("completed"),!this.countView&&t>=30&&this.$emit("count:view")}},methods:{checkSrc(t){if(t){const e=new URL(t);return"/undefined"===e.pathname?null:e.toString()}return null},toggleAudioPlay(){try{this.$refs.link.paused?(this.isPlaying=!0,this.$refs.link.play(),this.$emit("playing")):(this.isPlaying=!1,this.$refs.link.pause(),this.$emit("paused",this.currentTime))}catch(t){this.$emit("player-error","Could not start track")}},updateAudioDetails(){this.duration=this.$refs.link.duration,this.currentTime=this.$refs.link.currentTime},handleSkipPrevious(){try{this.$emit("skipped-backwards",this.formattedCurrentTime),this.$refs.link.currentTime=0}catch(t){console.error(t)}},handleSkipNext(){this.$emit("next-song")},handleProgressBarClick(t){const e=this.duration*t.offsetX/this.$refs.videoProgress.offsetWidth;this.currentTime=e,this.$refs.videoPlayer.currentTime=e,this.$emit("update:time",e)},handleDrag(t){if(0!==t.x&&0!==t.y){const e=this.$refs.progress;if(e){let n=0;const i=t.pageX-e.getBoundingClientRect().left;n=i,i<0&&(n=0),i>e.offsetWidth&&(n=e.offsetWidth),console.log(this.duration*(n/e.offsetWidth))}}},formatTime(t){let e=Math.floor(t/3600),n=Math.floor(t%3600/60),i=Math.floor(t%60);return e=e<10?"0"+e:e,n=n<10?"0"+n:n,i=i<10?"0"+i:i,e>0?":":`${n}:${i}`}}},v=n(89);const k=(0,v.Z)(w,[["render",y],["__scopeId","data-v-526b0f2e"]]);var _=k}}]);
//# sourceMappingURL=6860.e8a34ea4.js.map