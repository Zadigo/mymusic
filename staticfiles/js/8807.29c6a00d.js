"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[8807],{8807:function(t,e,i){i.r(e),i.d(e,{default:function(){return w}});var r=i(3396),n=i(7139),s=i(9242);const a=t=>((0,r.dD)("data-v-526b0f2e"),t=t(),(0,r.Cn)(),t),o={class:"container"},l={class:"py-1"},u={class:"p-1 mb-3 text-center"},d={type:"button",class:"btn btn-info shadow-sm"},c=["src"],h={class:"audio-controls"},p={class:"music-control-progress-container"},f=a((()=>(0,r._)("div",{class:"track-selection"},null,-1))),m={class:"row"},y={class:"col-12 mt-1 d-flex justify-content-between"};function g(t,e,i,a,g,k){const b=(0,r.up)("font-awesome-icon");return(0,r.wg)(),(0,r.iD)("div",o,[(0,r._)("div",l,[(0,r._)("div",u,[(0,r._)("button",{class:(0,n.C_)([[k.canPlay?null:"disabled"],"btn btn-primary"]),type:"button",onClick:e[0]||(e[0]=(...t)=>k.handleSkipPrevious&&k.handleSkipPrevious(...t))},[(0,r.Wm)(b,{icon:"fa-solid fa-backward-step"})],2),(0,r._)("button",{class:(0,n.C_)([[k.canPlay?null:"disabled"],"btn btn-primary mx-1"]),type:"button",onClick:e[1]||(e[1]=(...t)=>k.toggleAudioPlay&&k.toggleAudioPlay(...t))},[i.togglePlay?((0,r.wg)(),(0,r.j4)(b,{key:0,icon:"fa-solid fa-pause"})):((0,r.wg)(),(0,r.j4)(b,{key:1,icon:"fa-solid fa-play"}))],2),(0,r._)("button",{class:(0,n.C_)([[k.canPlay?null:"disabled"],"btn btn-primary"]),type:"button",onClick:e[2]||(e[2]=(...t)=>k.handleSkipNext&&k.handleSkipNext(...t))},[(0,r.Wm)(b,{icon:"fa-solid fa-forward-step"})],2),(0,r._)("button",{class:(0,n.C_)([[k.canPlay?null:"disabled"],"btn btn-primary mx-1"]),type:"button",onClick:e[3]||(e[3]=(0,s.withModifiers)((()=>{}),["prevent"]))},[(0,r.Wm)(b,{icon:"fa-solid fa-repeat"})],2),(0,r._)("button",d,[(0,r.Wm)(b,{icon:"fa-solid fa-volume-up"})])]),(0,r._)("div",null,[(0,r._)("audio",{ref:"link",preload:"auto",onLoadedmetadata:e[4]||(e[4]=(...t)=>k.updateAudioDetails&&k.updateAudioDetails(...t)),onTimeupdate:e[5]||(e[5]=(...t)=>k.updateAudioDetails&&k.updateAudioDetails(...t)),onWaiting:e[6]||(e[6]=t=>g.showSpinner=!0),onCanplay:e[7]||(e[7]=t=>g.showSpinner=!1)},[(0,r._)("source",{src:k.checkSrc(i.src),type:"audio/mpeg"},null,8,c)],544),(0,r._)("div",h,[(0,r._)("div",p,[(0,r._)("div",{ref:"videoProgress",class:"track",onClick:e[8]||(e[8]=(0,s.withModifiers)((t=>k.handleProgressBarClick(t)),["stop","prevent"]))},[(0,r._)("div",{style:(0,n.j5)({width:`${k.progressPercentage}%`}),class:"track-low"},null,4),f],512),(0,r._)("div",{style:(0,n.j5)({left:`${t.progress}%`}),class:"handle"},null,4)])]),(0,r._)("div",m,[(0,r._)("div",y,[(0,r._)("span",null,(0,n.zw)(k.formattedCurrentTime),1),(0,r._)("span",null,(0,n.zw)(k.formattedDuration),1)])])])])])}var k={name:"BaseMusicPlayer",props:{src:{type:String,required:!0},togglePlay:{type:Boolean}},emits:{"player-error"(){return!0},"player-ready"(){return!0},playing(){return!0},completed(){return!0},paused(){return!0},"skipped-backwards"(){return!0},"update:time"(){return!0},"next-song"(){return!0},"count:view"(){return!0}},data(){return{showSpinner:!0,duration:0,currentTime:0,isPlaying:!1,countView:!1}},computed:{formattedDuration(){return this.formatTime(this.duration)},formattedCurrentTime(){return this.formatTime(this.currentTime)},progressPercentage(){return 0===this.currentTime&&0===this.duration?0:this.currentTime/this.duration*100},canPlay(){return null!==this.checkSrc(this.src)}},watch:{src(t,e){t!==e&&(this.$refs.link.src=this.checkSrc(t),this.updateAudioDetails(),this.toggleAudioPlay())},togglePlay(){this.toggleAudioPlay()},currentTime(t){this.isPlaying&&t===this.duration&&this.$emit("completed"),!this.countView&&t>=30&&this.$emit("count:view")}},methods:{checkSrc(t){if(t){const e=new URL(t);return"/undefined"===e.pathname?null:e.toString()}return null},toggleAudioPlay(){try{this.$refs.link.paused?(this.isPlaying=!0,this.$refs.link.play(),this.$emit("playing")):(this.isPlaying=!1,this.$refs.link.pause(),this.$emit("paused",this.currentTime))}catch(t){this.$emit("player-error","Could not start track")}},updateAudioDetails(){this.duration=this.$refs.link.duration,this.currentTime=this.$refs.link.currentTime},handleSkipPrevious(){try{this.$emit("skipped-backwards",this.formattedCurrentTime),this.$refs.link.currentTime=0}catch(t){console.error(t)}},handleSkipNext(){this.$emit("next-song")},handleProgressBarClick(t){const e=this.duration*t.offsetX/this.$refs.videoProgress.offsetWidth;this.currentTime=e,this.$refs.videoPlayer.currentTime=e,this.$emit("update:time",e)},handleDrag(t){if(0!==t.x&&0!==t.y){const e=this.$refs.progress;if(e){let i=0;const r=t.pageX-e.getBoundingClientRect().left;i=r,r<0&&(i=0),r>e.offsetWidth&&(i=e.offsetWidth),console.log(this.duration*(i/e.offsetWidth))}}},formatTime(t){let e=Math.floor(t/3600),i=Math.floor(t%3600/60),r=Math.floor(t%60);return e=e<10?"0"+e:e,i=i<10?"0"+i:i,r=r<10?"0"+r:r,e>0?":":`${i}:${r}`}}},b=i(89);const v=(0,b.Z)(k,[["render",g],["__scopeId","data-v-526b0f2e"]]);var w=v}}]);
//# sourceMappingURL=8807.29c6a00d.js.map