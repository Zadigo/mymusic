"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[2932,8807],{9255:function(e,t,n){n.d(t,{J_:function(){return d},jh:function(){return c},sk:function(){return u}});n(1703);var i=n(4806),r=n.n(i);function o(e,t){throw new Error(`${e} - ${t}`)}function a(e){return()=>n(2513)(`./${e}.vue`)}function s(e){return()=>n(2115)(`./${e}.vue`)}function l(e){return()=>n(3457)(`./${e}.vue`)}function u(e){return new Promise((t=>setTimeout(t,e)))}function c(){function e(e){let t=[];return"object"===typeof e&&(t=Object.values(e)),r().some(t,(e=>null===e||""===e))}function t(e){e.forEach((e=>"object"!==typeof e?(o("indexElements",`${e} is not a dictionnary`),null):(e.id=1,e)))}function n(e){var t=r().last(e);return"object"!==typeof t?(o("incrementLastId",`${t} is not a dictionnary`),null):t.id+1}function i(e){var t=null;if(e&&e[0]){const n=new FileReader;n.onload=e=>{t=e.target.result},n.readAsDataURL(e[0])}return t}function u(e){return e.map((e=>i(e)))}function c(e,t=28){return"string"!==typeof e?(o("truncate",`${e} should be a string`),""):`${e.slice(0,t)}...`}function d(e,t,n){return e.length>=t?c(e,n):e}function f(e,t){if(e.includes(t)){const n=r().indexOf(e,t);e.splice(n,1)}else e.push(t);return e}function m(e,t){var n=t+1;return n>e.length-1&&(n=0),n}function p(e,t){var n=t-1;return n<0&&(n=e.length-1),n}function h(e){document.getElementById(e).scrollIntoView()}function g(e){return e?e.charAt(0).toUpperCase()+e.slice(1):e}function y(e){var t=e.split(" "),n=t.map((e=>g(e)));return n.join(" ")}function v(e,t=!1){return t?`-${e}%`:`${e}%`}function w(e){var t=e.parentNode;return(e.scrollTop||t.scrollTop)/(t.scrollHeight-t.clientHeight)*100}function _(e,t=!0){return e.sort(((e,n)=>t?e-n:n-e))}return{capitalizeFirstLetter:g,capitalizeLetters:y,conditionalTruncate:d,decreaseIndex:p,formatAsPercentage:v,getVerticalScrollPercentage:w,hasNull:e,indexElements:t,incrementLastId:n,increaseIndex:m,listManager:f,loadComponent:l,loadLayout:s,loadView:a,quickSort:_,readFile:i,readMultipleFiles:u,scrollToSection:h,truncate:c}}function d(){function e(e){var t=new URL(e,window.location.href);return t.toString()}function t(e){var t={NODE_ENV:"production",BASE_URL:"/"}.rootUrl||"http://127.0.0.1:8000";return new URL(e,t).toString()}function n(e,t=100,n=0){let i=100,r=0;if(e){const o=new URL(e),a=o.searchParams.get("limit"),s=o.searchParams.get("offset");i=a||t,r=s||n}return new URLSearchParams({limit:i,offset:r})}function i(e,t=1){let n=1;if(e){const i=new URL(e),r=i.searchParams.get("page");n=r||t}return new URLSearchParams({page:n})}return{buildLimitOffset:n,getPageFromParams:i,mediaUrl:t,rebuildPath:e}}},2097:function(e,t,n){n.d(t,{J:function(){return r}});var i=n(3766);const r=(0,i.Q_)("authentication",{state:()=>({user:{email:null},token:null,loginModal:!1,profileComponentName:"profile-overview"}),actions:{logoutUser(){this.user={email:null,token:null},this.token=null,this.session.remove("auth")},loginUser(e){this.user=e,this.token=e.token},loadUserSession(){const e=this.session.retrieve("auth"),t=e||{email:null,token:null};this.loginUser(t)}},getters:{isAuthenticated(){return this.loadUserSession(),null!==this.token}}})},7823:function(e,t,n){n.d(t,{n:function(){return r}});var i=n(3766);const r=(0,i.Q_)("player",{state:()=>({isPlaying:!1,currentSong:{}}),actions:{play(e){this.currentSong=e,this.isPlaying=!0},pause(){this.isPlaying=!1}},getters:{isCurrentSong(){return e=>e.name===this.currentSong.name}}})},2932:function(e,t,n){n.r(t),n.d(t,{default:function(){return P}});var i=n(3396),r=n(7139),o=n(9242);const a={class:"left"},s={key:0,id:"app-navigation"},l=["onClick"],u={key:1,id:"app-navigation"},c={id:"profile-navigation"},d={class:"right"},f={class:"bottom"},m={class:"container"},p={class:"px-5 mx-5"};function h(e,t,n,h,g,y){const v=(0,i.up)("font-awesome-icon"),w=(0,i.up)("router-link"),_=(0,i.up)("router-view"),k=(0,i.up)("base-music-player-vue");return(0,i.wg)(),(0,i.iD)("section",{class:(0,r.C_)([y.mainInterfaceClasses,"main-interface"])},[(0,i._)("div",a,[(0,i.Wm)(o.Transition,{name:"general"},{default:(0,i.w5)((()=>["profile_view"===e.$route.name?((0,i.wg)(),(0,i.iD)("div",s,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(g.profileNavButtons,((t,n)=>((0,i.wg)(),(0,i.iD)("button",{key:n,class:(0,r.C_)([{active:t.component===h.store.profileComponentName},"nav-button"]),type:"button",onClick:e=>h.store.profileComponentName=t.component},[(0,i.Wm)(v,{class:"me-3",icon:`fa-solid fa-${t.icon}`},null,8,["icon"]),(0,i._)("span",null,(0,r.zw)(e.$t(t.name)),1)],10,l)))),128))])):((0,i.wg)(),(0,i.iD)("div",u,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(g.navButtons,((t,n)=>((0,i.wg)(),(0,i.j4)(w,{key:n,to:{name:t.to},class:"nav-button ripple-effect"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{class:"me-3",icon:t.icon},null,8,["icon"]),(0,i._)("span",null,(0,r.zw)(e.$t(t.name)),1)])),_:2},1032,["to"])))),128))]))])),_:1}),(0,i._)("div",c,["profile_view"==e.$route.name?((0,i.wg)(),(0,i.j4)(w,{key:0,class:"nav-button profile-button",to:{name:"home_view"}},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{class:"me-3",icon:"fa-solid fa-arrow-left"}),(0,i._)("span",null,(0,r.zw)(e.$t("Back to home")),1)])),_:1})):((0,i.wg)(),(0,i.j4)(w,{key:1,id:"nav-button",class:"nav-button profile",to:{name:"profile_view"}},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{class:"me-3",icon:"fa-solid fa-cog"}),(0,i._)("span",null,(0,r.zw)(e.$t("Profile")),1)])),_:1}))])]),(0,i._)("div",d,[(0,i.Wm)(_,null,{default:(0,i.w5)((({Component:e})=>[(0,i.Wm)(o.Transition,{name:"opacity",mode:"in-out"},{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.j4)((0,i.LL)(e),{onDisplayAlert:y.displayAlert},null,40,["onDisplayAlert"]))])),_:2},1024)])),_:1})]),(0,i._)("div",f,[(0,i._)("div",m,[(0,i._)("div",p,[(0,i.Wm)(k,{src:h.mediaUrl(h.player.currentSong.song_file),"toggle-play":h.player.isPlaying,onPlaying:t[0]||(t[0]=e=>h.player.play(h.player.currentSong)),onPaused:t[1]||(t[1]=e=>h.player.pause())},null,8,["src","toggle-play"])])])])],2)}var g=n(9255),y=n(7823),v=n(2097),w=n(8807),_={name:"BaseInterface",components:{BaseMusicPlayerVue:w["default"]},setup(){const e=(0,v.J)(),{mediaUrl:t}=(0,g.J_)(),n=(0,y.n)();return{store:e,mediaUrl:t,player:n}},data(){return{minimizeLeft:!1,navButtons:[{name:"Home",to:"home_view",icon:"home"},{name:"Search",to:"search_view",icon:"magnifying-glass"},{name:"Playlists",to:"playlists_view",icon:"list"},{name:"Charts",to:"charts_view",icon:"chart-simple"}],profileNavButtons:[{name:"Account",component:"profile-overview",icon:"home"},{name:"Notifications",component:"notifications-choices",icon:"bell"}]}},computed:{mainInterfaceClasses(){return[{minimize:this.minimizeLeft}]}},beforeMount(){this.localStorage.settings},methods:{minimize(){this.minimizeLeft=!this.minimizeLeft;let e=this.$localstorage.retrieve("settings");e=e||{},e.minimized=this.minimizeLeft,this.$localstorage.create(e)},displayAlert(e,t,n){this.$refs.alert.showAlert(e,n,t)}}},k=n(89);const b=(0,k.Z)(_,[["render",h],["__scopeId","data-v-51f8c518"]]);var P=b},8807:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var i=n(3396),r=n(7139),o=n(9242);const a=e=>((0,i.dD)("data-v-526b0f2e"),e=e(),(0,i.Cn)(),e),s={class:"container"},l={class:"py-1"},u={class:"p-1 mb-3 text-center"},c={type:"button",class:"btn btn-info shadow-sm"},d=["src"],f={class:"audio-controls"},m={class:"music-control-progress-container"},p=a((()=>(0,i._)("div",{class:"track-selection"},null,-1))),h={class:"row"},g={class:"col-12 mt-1 d-flex justify-content-between"};function y(e,t,n,a,y,v){const w=(0,i.up)("font-awesome-icon");return(0,i.wg)(),(0,i.iD)("div",s,[(0,i._)("div",l,[(0,i._)("div",u,[(0,i._)("button",{class:(0,r.C_)([[v.canPlay?null:"disabled"],"btn btn-primary"]),type:"button",onClick:t[0]||(t[0]=(...e)=>v.handleSkipPrevious&&v.handleSkipPrevious(...e))},[(0,i.Wm)(w,{icon:"fa-solid fa-backward-step"})],2),(0,i._)("button",{class:(0,r.C_)([[v.canPlay?null:"disabled"],"btn btn-primary mx-1"]),type:"button",onClick:t[1]||(t[1]=(...e)=>v.toggleAudioPlay&&v.toggleAudioPlay(...e))},[n.togglePlay?((0,i.wg)(),(0,i.j4)(w,{key:0,icon:"fa-solid fa-pause"})):((0,i.wg)(),(0,i.j4)(w,{key:1,icon:"fa-solid fa-play"}))],2),(0,i._)("button",{class:(0,r.C_)([[v.canPlay?null:"disabled"],"btn btn-primary"]),type:"button",onClick:t[2]||(t[2]=(...e)=>v.handleSkipNext&&v.handleSkipNext(...e))},[(0,i.Wm)(w,{icon:"fa-solid fa-forward-step"})],2),(0,i._)("button",{class:(0,r.C_)([[v.canPlay?null:"disabled"],"btn btn-primary mx-1"]),type:"button",onClick:t[3]||(t[3]=(0,o.withModifiers)((()=>{}),["prevent"]))},[(0,i.Wm)(w,{icon:"fa-solid fa-repeat"})],2),(0,i._)("button",c,[(0,i.Wm)(w,{icon:"fa-solid fa-volume-up"})])]),(0,i._)("div",null,[(0,i._)("audio",{ref:"link",preload:"auto",onLoadedmetadata:t[4]||(t[4]=(...e)=>v.updateAudioDetails&&v.updateAudioDetails(...e)),onTimeupdate:t[5]||(t[5]=(...e)=>v.updateAudioDetails&&v.updateAudioDetails(...e)),onWaiting:t[6]||(t[6]=e=>y.showSpinner=!0),onCanplay:t[7]||(t[7]=e=>y.showSpinner=!1)},[(0,i._)("source",{src:v.checkSrc(n.src),type:"audio/mpeg"},null,8,d)],544),(0,i._)("div",f,[(0,i._)("div",m,[(0,i._)("div",{ref:"videoProgress",class:"track",onClick:t[8]||(t[8]=(0,o.withModifiers)((e=>v.handleProgressBarClick(e)),["stop","prevent"]))},[(0,i._)("div",{style:(0,r.j5)({width:`${v.progressPercentage}%`}),class:"track-low"},null,4),p],512),(0,i._)("div",{style:(0,r.j5)({left:`${e.progress}%`}),class:"handle"},null,4)])]),(0,i._)("div",h,[(0,i._)("div",g,[(0,i._)("span",null,(0,r.zw)(v.formattedCurrentTime),1),(0,i._)("span",null,(0,r.zw)(v.formattedDuration),1)])])])])])}var v={name:"BaseMusicPlayer",props:{src:{type:String,required:!0},togglePlay:{type:Boolean}},emits:{"player-error"(){return!0},"player-ready"(){return!0},playing(){return!0},completed(){return!0},paused(){return!0},"skipped-backwards"(){return!0},"update:time"(){return!0},"next-song"(){return!0},"count:view"(){return!0}},data(){return{showSpinner:!0,duration:0,currentTime:0,isPlaying:!1,countView:!1}},computed:{formattedDuration(){return this.formatTime(this.duration)},formattedCurrentTime(){return this.formatTime(this.currentTime)},progressPercentage(){return 0===this.currentTime&&0===this.duration?0:this.currentTime/this.duration*100},canPlay(){return null!==this.checkSrc(this.src)}},watch:{src(e,t){e!==t&&(this.$refs.link.src=this.checkSrc(e),this.updateAudioDetails(),this.toggleAudioPlay())},togglePlay(){this.toggleAudioPlay()},currentTime(e){this.isPlaying&&e===this.duration&&this.$emit("completed"),!this.countView&&e>=30&&this.$emit("count:view")}},methods:{checkSrc(e){if(e){const t=new URL(e);return"/undefined"===t.pathname?null:t.toString()}return null},toggleAudioPlay(){try{this.$refs.link.paused?(this.isPlaying=!0,this.$refs.link.play(),this.$emit("playing")):(this.isPlaying=!1,this.$refs.link.pause(),this.$emit("paused",this.currentTime))}catch(e){this.$emit("player-error","Could not start track")}},updateAudioDetails(){this.duration=this.$refs.link.duration,this.currentTime=this.$refs.link.currentTime},handleSkipPrevious(){try{this.$emit("skipped-backwards",this.formattedCurrentTime),this.$refs.link.currentTime=0}catch(e){console.error(e)}},handleSkipNext(){this.$emit("next-song")},handleProgressBarClick(e){const t=this.duration*e.offsetX/this.$refs.videoProgress.offsetWidth;this.currentTime=t,this.$refs.videoPlayer.currentTime=t,this.$emit("update:time",t)},handleDrag(e){if(0!==e.x&&0!==e.y){const t=this.$refs.progress;if(t){let n=0;const i=e.pageX-t.getBoundingClientRect().left;n=i,i<0&&(n=0),i>t.offsetWidth&&(n=t.offsetWidth),console.log(this.duration*(n/t.offsetWidth))}}},formatTime(e){let t=Math.floor(e/3600),n=Math.floor(e%3600/60),i=Math.floor(e%60);return t=t<10?"0"+t:t,n=n<10?"0"+n:n,i=i<10?"0"+i:i,t>0?":":`${n}:${i}`}}},w=n(89);const _=(0,w.Z)(v,[["render",y],["__scopeId","data-v-526b0f2e"]]);var k=_}}]);
//# sourceMappingURL=2932.b1ea87e3.js.map