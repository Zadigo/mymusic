"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[37,14],{9255:function(e,t,i){i.d(t,{J_:function(){return a},sk:function(){return n}});i(1703),i(4806);function n(e){return new Promise((t=>setTimeout(t,e)))}function a(){function e(e){var t=new URL(e,window.location.href);return t.toString()}function t(e){var t={NODE_ENV:"production",BASE_URL:"/"}.rootUrl||"http://127.0.0.1:8000";return new URL(e,t).toString()}function i(e,t=100,i=0){let n=100,a=0;if(e){const r=new URL(e),s=r.searchParams.get("limit"),o=r.searchParams.get("offset");n=s||t,a=o||i}return new URLSearchParams({limit:n,offset:a})}function n(e,t=1){let i=1;if(e){const n=new URL(e),a=n.searchParams.get("page");i=a||t}return new URLSearchParams({page:i})}return{buildLimitOffset:i,getPageFromParams:n,mediaUrl:t,rebuildPath:e}}},7823:function(e,t,i){i.d(t,{n:function(){return a}});var n=i(3766);const a=(0,n.Q_)("player",{state:()=>({isPlaying:!1,currentSong:{}}),actions:{play(e){this.currentSong=e,this.isPlaying=!0},pause(){this.isPlaying=!1}},getters:{isCurrentSong(){return e=>e.name===this.currentSong.name}}})},5037:function(e,t,i){i.r(t),i.d(t,{default:function(){return _}});var n=i(3396),a=i(9242),r=i(7139);const s={class:"main-interface"},o={class:"left"},l={key:0,id:"app-navigation"},u={key:1,id:"app-navigation"},c={id:"profile-navigation"},d={class:"center"},m={class:"right"},p=["src","alt"];function f(e,t,i,f,g,h){const y=(0,n.up)("font-awesome-icon"),w=(0,n.up)("router-link"),k=(0,n.up)("router-view"),v=(0,n.up)("base-music-player-vue");return(0,n.wg)(),(0,n.iD)("section",s,[(0,n._)("div",o,[(0,n.Wm)(a.Transition,{name:"general"},{default:(0,n.w5)((()=>["profile"===e.$route.name?((0,n.wg)(),(0,n.iD)("div",l,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.profileNavButtons,((e,t)=>((0,n.wg)(),(0,n.j4)(w,{key:t,to:{name:e.name},class:"nav-button"},{default:(0,n.w5)((()=>[(0,n.Wm)(y,{class:"mr-3",icon:`fa-solid fa-${e.icon}`},null,8,["icon"]),(0,n.Uk)(" "+(0,r.zw)(e.name),1)])),_:2},1032,["to"])))),128))])):((0,n.wg)(),(0,n.iD)("div",u,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.navButtons,((t,i)=>((0,n.wg)(),(0,n.j4)(w,{key:i,to:{name:t.to},class:"nav-button ripple-effect"},{default:(0,n.w5)((()=>[(0,n.Wm)(y,{class:"me-3",icon:t.icon},null,8,["icon"]),(0,n.Uk)(" "+(0,r.zw)(e.$t(t.name)),1)])),_:2},1032,["to"])))),128))]))])),_:1}),(0,n._)("div",c,["profile"==e.$route.name?((0,n.wg)(),(0,n.j4)(w,{key:0,id:"nav-button",class:"profile-button",to:{name:"home_view"}},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(e.$t("Back to home")),1)])),_:1})):((0,n.wg)(),(0,n.j4)(w,{key:1,id:"nav-button",class:"nav-button profile",to:{name:"profile_view"}},{default:(0,n.w5)((()=>[(0,n.Wm)(y,{class:"me-3",icon:"fa-solid fa-cog"}),(0,n.Uk)(" "+(0,r.zw)(e.$t("Profile")),1)])),_:1}))])]),(0,n._)("div",d,[(0,n.Wm)(k,null,{default:(0,n.w5)((({Component:e})=>[(0,n.Wm)(a.Transition,{name:"opacity",mode:"in-out"},{default:(0,n.w5)((()=>[((0,n.wg)(),(0,n.j4)((0,n.LL)(e),{onDisplayAlert:h.displayAlert},null,40,["onDisplayAlert"]))])),_:2},1024)])),_:1})]),(0,n._)("div",m,[Object.keys(f.player.currentSong).length>0?((0,n.wg)(),(0,n.iD)("img",{key:0,src:f.mediaUrl(f.player.currentSong.album.cover_image_thumbnail),alt:f.player.currentSong.album.artist.name,class:"img-fluid rounded shadow-sm mb-3"},null,8,p)):(0,n.kq)("",!0),(0,n.Wm)(v,{src:f.mediaUrl(f.player.currentSong.song_file),"toggle-play":f.player.isPlaying,onPlaying:t[0]||(t[0]=e=>f.player.play(f.player.currentSong)),onPaused:t[1]||(t[1]=e=>f.player.pause())},null,8,["src","toggle-play"])])])}var g=i(9255),h=i(7823),y=i(2014),w={name:"BaseInterface",components:{BaseMusicPlayerVue:y["default"]},setup(){const{mediaUrl:e}=(0,g.J_)(),t=(0,h.n)();return{mediaUrl:e,player:t}},data:()=>({minimizeRight:!1,navButtons:[{name:"Home",to:"home_view",icon:"home"},{name:"Search",to:"search_view",icon:"magnifying-glass"},{name:"Playlists",to:"playlists_view",icon:"list"}]}),beforeMount(){this.localStorage.settings},methods:{minimize(){this.minimizeRight=!this.minimizeRight;let e=this.$localstorage.retrieve("settings");e=e||{},e.minimized=this.minimizeRight},displayAlert(e,t,i){this.$refs.alert.showAlert(e,i,t)}}},k=i(89);const v=(0,k.Z)(w,[["render",f],["__scopeId","data-v-dca905e6"]]);var _=v},2014:function(e,t,i){i.r(t),i.d(t,{default:function(){return v}});var n=i(3396),a=i(9242),r=i(7139);const s={class:"card bg-transparent"},o={class:"card-body position-relative"},l=["src"],u={class:"audio-controls"},c={class:"progress-bar-container"},d={class:"row"},m={class:"col-12 mt-3 d-flex justify-content-between"},p={class:"card-footer text-center"},f={class:"btn-group shadow-sm"},g={type:"button",class:"btn btn-info shadow-sm mt-1"};function h(e,t,i,h,y,w){const k=(0,n.up)("font-awesome-icon");return(0,n.wg)(),(0,n.iD)("div",s,[(0,n._)("div",o,[(0,n._)("audio",{ref:"link",preload:"auto",onLoadedmetadata:t[0]||(t[0]=(...e)=>w.updateAudioDetails&&w.updateAudioDetails(...e)),onTimeupdate:t[1]||(t[1]=(...e)=>w.updateAudioDetails&&w.updateAudioDetails(...e)),onWaiting:t[2]||(t[2]=t=>e.showSpinner=!0),onCanplay:t[3]||(t[3]=t=>e.showSpinner=!1)},[(0,n._)("source",{src:w.checkSrc(i.src),type:"audio/mpeg"},null,8,l)],544),(0,n._)("div",u,[(0,n._)("div",c,[(0,n._)("div",{ref:"progress",class:"progress-bar",onClick:t[5]||(t[5]=(0,a.withModifiers)(((...e)=>w.handleProgressBarClick&&w.handleProgressBarClick(...e)),["prevent","stop"]))},[(0,n._)("div",{style:(0,r.j5)({width:w.progressPercentage+"%"}),class:"progress-bar-completed"},[(0,n._)("div",{style:(0,r.j5)({left:w.progressPercentage+"%"}),class:"progress-indicator",draggable:"",onMousedown:t[4]||(t[4]=(...e)=>w.handleDrag&&w.handleDrag(...e))},null,36)],4)],512)])]),(0,n._)("div",d,[(0,n._)("div",m,[(0,n._)("span",null,(0,r.zw)(w.formattedCurrentTime),1),(0,n._)("span",null,(0,r.zw)(w.formattedDuration),1)])])]),(0,n._)("div",p,[(0,n._)("div",f,[(0,n._)("button",{class:(0,r.C_)([[w.canPlay?null:"disabled"],"btn btn-primary"]),type:"button",onClick:t[6]||(t[6]=(...e)=>w.handleSkipPrevious&&w.handleSkipPrevious(...e))},[(0,n.Wm)(k,{icon:"fa-solid fa-backward-step"})],2),(0,n._)("button",{class:(0,r.C_)([[w.canPlay?null:"disabled"],"btn btn-primary"]),type:"button",onClick:t[7]||(t[7]=(...e)=>w.toggleAudioPlay&&w.toggleAudioPlay(...e))},[i.togglePlay?((0,n.wg)(),(0,n.j4)(k,{key:0,icon:"fa-solid fa-pause"})):((0,n.wg)(),(0,n.j4)(k,{key:1,icon:"fa-solid fa-play"}))],2),(0,n._)("button",{class:(0,r.C_)([[w.canPlay?null:"disabled"],"btn btn-primary"]),type:"button",onClick:t[8]||(t[8]=(...e)=>w.handleSkipNext&&w.handleSkipNext(...e))},[(0,n.Wm)(k,{icon:"fa-solid fa-forward-step"})],2)]),(0,n._)("button",g,[(0,n.Wm)(k,{icon:"fa-solid fa-volume-up"})])])])}var y={name:"BaseMusicPlayer",props:{src:{type:String,required:!0},togglePlay:{type:Boolean}},emits:{"player-error":()=>!0,"player-ready":()=>!0,playing:()=>!0,completed:()=>!0,paused:()=>!0,"skipped-backwards":()=>!0,skipped:()=>!0,"next-song":()=>!0},data:()=>({showSpinner:!0,duration:0,currentTime:0,isPlaying:!1}),computed:{formattedDuration(){return this.formatTime(this.duration)},formattedCurrentTime(){return this.formatTime(this.currentTime)},progressPercentage(){return 0===this.currentTime&&0===this.duration?0:this.currentTime/this.duration*100},canPlay(){return null!==this.checkSrc(this.src)}},watch:{src(e,t){e!==t&&(this.$refs.link.src=this.checkSrc(e),this.updateAudioDetails(),this.toggleAudioPlay())},togglePlay(){this.toggleAudioPlay()},currentTime(e){this.isPlaying&&e===this.duration&&this.$emit("completed")}},methods:{checkSrc(e){if(e){const t=new URL(e);return"/undefined"===t.pathname?null:t.toString()}return null},toggleAudioPlay(){try{this.$refs.link.paused?(this.isPlaying=!0,this.$refs.link.play(),this.$emit("playing")):(this.isPlaying=!1,this.$refs.link.pause(),this.$emit("paused",this.currentTime))}catch(e){this.$emit("player-error","Could not start track")}},updateAudioDetails(){this.duration=this.$refs.link.duration,this.currentTime=this.$refs.link.currentTime},handleSkipPrevious(){try{this.$emit("skipped-backwards",this.formattedCurrentTime),this.$refs.link.currentTime=0}catch(e){console.error(e)}},handleSkipNext(){this.$emit("next-song")},handleProgressBarClick(e){const t=this.currentTime,i=this.duration*e.offsetX/this.$refs.progress.offsetWidth;this.currentTime=i,this.$refs.link.currentTime=i,this.$emit("skipped",[t,this.currentTime])},handleDrag(e){if(0!==e.x&&0!==e.y){const t=this.$refs.progress;if(t){let i=0;const n=e.pageX-t.getBoundingClientRect().left;i=n,n<0&&(i=0),n>t.offsetWidth&&(i=t.offsetWidth),console.log(this.duration*(i/t.offsetWidth))}}},formatTime(e){let t=Math.floor(e/3600),i=Math.floor(e%3600/60),n=Math.floor(e%60);return t=t<10?"0"+t:t,i=i<10?"0"+i:i,n=n<10?"0"+n:n,t>0?":":`${i}:${n}`}}},w=i(89);const k=(0,w.Z)(y,[["render",h],["__scopeId","data-v-451797cb"]]);var v=k}}]);
//# sourceMappingURL=37.fa0cbf37.js.map